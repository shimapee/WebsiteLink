<!DOCTYPE html>
<html lang='ja' ng-app="jsondata">
	<head>
		<!-- IE対応 -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>リンク臭</title>

		<meta charset="UTF-8">

		<!-- マルチデバイス対応 -->
		<meta name="viewport" content="width=device-width,initial-scale=1.0">

		<!-- CSS -->
		<link rel="stylesheet" type="text/css" href="dist/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="dist/css/mylink.css">
		<!-- JavaScript -->
		<script src="dist/js/jquery-1.11.3.min.js"></script>
		<script src="dist/js/bootstrap.min.js"></script>
		<script src="dist/js/link.js"></script>
		<script src="dist/js/feedapi.js"></script>
	</head>
	<body>
	<div class="container" style="margin-top:30px;">
		<div id="ws-main">
			<div class="panel-group" id="accordion">
			</div>
		</div>
		<div id="ws-sidebar">
			<div class="alert alert-danger" role="alert">Yahoo!トピックス</div>
			<h5>
				<div id="yahoo" class="rssfeild"></div>
			</h5>
			<div class="alert alert-info" role="alert">毎日新聞新着</div>
			<h5>
				<div id="mainichi-flash" class="rssfeild"></div>
			</h5>
			<div class="alert alert-success" role="alert">＠IT</div>
			<h5>
				<div id="at-it" class="rssfeild"></div>
			</h5>
			<div class="alert alert-warning" role="alert">ITMedia Security</div>
			<h5>
				<div id="itm-sec" class="rssfeild"></div>
			</h5>
		</div>
	</div>

	<script type="text/javascript">
		$(function(){
			for(var i in links){
				//console.log(links[i].sysname);
				var temp_panel_header = '<div class="panel panel-default">';
				temp_panel_header += '<div class="panel-heading">';
				temp_panel_header += '<h4 class="panel-title">';
				temp_panel_header += '<a role="button" data-toggle="collapse" data-parent="#accordion" href="#sys'+i+'">';
				temp_panel_header += links[i].sysname;
				temp_panel_header += '</a>';
				temp_panel_header += '</div><!-- / panel-heading -->';
				temp_panel_header += '<div id="sys'+i+'" class="panel-collapse collapse">';
				temp_panel_header += '<div class="panel-body"><div class="row">';
				var temp_panel_body = '';
				console.log(links[i].sysname);
				for(var j in links[i].link) {
					console.log(links[i].link[j].category);
					if(links[i].link[j].url != null) {
						temp_panel_body += '<div class="col-md-2 bordered">' + links[i].link[j].category + '</div>';
						temp_panel_body += '<div class="col-md-10 bordered"><!-- sub -->';
						temp_panel_body += '<div class="col-md-offset-2 col-md-10"><!-- sub -->';
						temp_panel_body += '<a href="' + links[i].link[j].url + '" target="_blank">';
						temp_panel_body += links[i].link[j].url;
						temp_panel_body += '</a></div></div><!-- / sub -->';
						console.log(links[i].link[j].url);
					} else {
						var subs = links[i].link[j].sub;
						console.log(subs.length);
						for (var k in subs) {
							if(k == 0) temp_panel_body += '<div class="col-md-2 bordered-top">' + links[i].link[j].category +'</div>';
							if(k == subs.length-1) temp_panel_body += '<div class="col-md-2 bordered-end">&nbsp;</div>';
							if(k != 0 && k < subs.length-1) temp_panel_body += '<div class="col-md-2">&nbsp;</div>';
							temp_panel_body += '<div class="col-md-10 bordered"><!-- sub -->';
							temp_panel_body += '<div class="col-md-2 bordered-right">';
							temp_panel_body += '<h6 style="padding: 3px 0px; margin:0;">'+subs[k].name+'</h6>';
							temp_panel_body += '</div><div class="col-md-10"><!-- link URL -->';
							temp_panel_body += '<a href="'+subs[k].url+'" target="_blank">';
							temp_panel_body += subs[k].url;
							temp_panel_body += '</a></div><!-- / link URL --></div><!-- / sub -->';
							console.log(subs[k].name);
							console.log(subs[k].url)
						}
						
					}
				}
				temp_panel_header += temp_panel_body;
				temp_panel_header += '</div><!-- / row --></div><!-- / panel-body --></div><!-- / panel-collapse --></div><!-- / panel -->';
				$("#accordion").append(temp_panel_header);
			}
		});

	</script>

	</body>
</html>
